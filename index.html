<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>SCO-AE Secure Node</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
        body {
            background-color: #111;
            color: #c8c8c8;
            font-family: 'Courier New', monospace;
        }

        .classified-banner {
            background-color: #dc3545;
            color: #fff;
            padding: 0.5rem;
            text-align: center;
            letter-spacing: 2px;
            font-weight: bold;
        }

        .main-container {
            padding: 2rem;
        }

        .title {
            color: #00ffcc;
            font-weight: bold;
            text-transform: uppercase;
        }

        .subtext {
            font-size: 0.9rem;
            color: #999;
        }

        .terminal-box {
            background-color: #000;
            padding: 1rem;
            border: 1px solid #00ffcc;
            border-radius: 5px;
            margin-top: 1.5rem;
            font-size: 0.95rem;
            line-height: 1.5rem;
            white-space: pre-wrap;
            height: 400px;
            overflow-y: auto;
        }

        input.terminal-input {
            background-color: #000;
            color: #0f0;
            border: none;
            border-bottom: 1px solid #00ffcc;
            width: 100%;
            outline: none;
            font-family: 'Courier New', monospace;
        }

        .footer {
            margin-top: 3rem;
            font-size: 0.8rem;
            color: #666;
            text-align: center;
        }

        .user-content {
            display: none;
            margin-top: 1.5rem;
            background-color: #1a1a1a;
            padding: 1rem;
            border-left: 4px solid #00ffcc;
        }
    </style>
</head>
<body>
    <div class="classified-banner">
        EU RESTRICTED ACCESS – SCO-AE SECURE NODE
    </div>

    <div class="container main-container">
        <h1 class="title">Special Coordination Office for Anomalous Events</h1>
        <p class="subtext">Directorate-General for Home Affairs · Division: AE/42/JANUS</p>

        <div class="terminal-box" id="terminal"></div>
        <input type="text" id="commandInput" class="terminal-input" placeholder="> waiting for user login..." disabled />

        <div class="footer">
            &copy; 2025 European Union · SCO-AE · Secure Infrastructure Division
        </div>
    </div>

    <script src="data.js"></script>
    <script>
        const terminal = document.getElementById("terminal");
        const input = document.getElementById("commandInput");

        //const users = {
        //    "taroo_arg": { password: "JANUS2025", contentId: "content-taroo_arg" },
        //    "halvorune": { password: "VANIR03", contentId: "content-halvorune" },
        //    "radardev": { password: "CASCADER", contentId: "content-radardev" },
        //    "kingpin": { password: "AEWEAPON", contentId: "content-kingpin" }
        //};

        let loginStep = 0;
        let loginUser = "";
        let authenticated = false;
        let user = null;

        function appendLine(text = "", color = "#ccc") {
            const line = document.createElement("div");
            line.textContent = text;
            line.style.color = color;
            terminal.appendChild(line);
            terminal.scrollTop = terminal.scrollHeight;
        }

        function handleCommand(inputText) {
            appendLine("> " + inputText, "#0f0");

            if (!authenticated) {
                if (loginStep === 0) {
                    loginUser = inputText.trim();
                    appendLine("Username: " + loginUser);
                    appendLine("Enter password:");
                    loginStep = 1;
                } else if (loginStep === 1) {
                    const password = inputText.trim();
                    console.log(data.users, data.users[loginUser], loginUser);
                    console.log(data.users[loginUser].password, password);
                    appendLine("Authenticating...");
                    setTimeout(() => {
                        console.log("Checking credentials for:", loginUser);
                        if (!data || !data.users) return console.error("Data not ready");

                        if (data.users[loginUser] && data.users[loginUser].password === password) {
                            console.log("ACCESS GRANTED");
                            appendLine("[ACCESS GRANTED]", "#0f0");
                            user = data.users[loginUser];
                            authenticated = true;
                            input.placeholder = "> ";
                            appendIntro();
                        } else {
                            console.log("ACCESS DENIED");
                            appendLine("[ACCESS DENIED]", "#f33");
                            loginStep = 0;
                            loginUser = "";
                            input.placeholder = "> Enter username:";
                        }
                    }, 5000);
                }
            } else {
                const cmd = inputText.trim().toLowerCase();

                switch (cmd) {
                    case "validate_user":
                        appendLine("[SYSTEM]: Validation failed. Clearance mismatch.");
                        break;
                    case "probe --logs ae-18":
                        appendLine("[PROBE]: Incident AE-18-2025 identified. Location: Trento. Classification: MEM-H.");
                        break;
                    case "access incident_log":
                        appendLine("[ACCESS DENIED]: You do not have sufficient clearance to view classified logs.");
                        break;
                    default:
                        appendLine("[ERROR]: Unknown command.");
                }
            }
        }

        function appendIntro() {
            user.intro.forEach((line, i) => {
                setTimeout(() => appendLine(line), 100 * i);
            });
        }

        input.addEventListener("keydown", function (e) {
            if (e.key === "Enter") {
                const command = input.value.trim();
                input.value = "";
                handleCommand(command);
            }
        });

        window.onload = () => {
            appendLine(data.loginBanner, "#00ffcc");
            appendLine("Enter username:");
            input.disabled = false;
            input.focus();
        };
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
